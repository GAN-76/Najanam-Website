document.addEventListener('DOMContentLoaded',function(){const mobileToggle=document.querySelector('.mobile-menu-toggle');const mainMenu=document.querySelector('.main-menu');if(mobileToggle&&mainMenu){mobileToggle.addEventListener('click',function(){mainMenu.classList.toggle('active');mobileToggle.classList.toggle('active');const isExpanded=mainMenu.classList.contains('active');mobileToggle.setAttribute('aria-expanded',isExpanded);mobileToggle.setAttribute('aria-label',isExpanded ? 'Menü schliessen' : 'Menü öffnen');if(isExpanded){document.body.style.overflow='hidden';}else{document.body.style.overflow='';}});const menuLinks=mainMenu.querySelectorAll('a');menuLinks.forEach(link=>{link.addEventListener('click',function(){mainMenu.classList.remove('active');mobileToggle.classList.remove('active');mobileToggle.setAttribute('aria-expanded','false');mobileToggle.setAttribute('aria-label','Menü öffnen');document.body.style.overflow='';});});document.addEventListener('click',function(event){if(!mobileToggle.contains(event.target)&&!mainMenu.contains(event.target)){mainMenu.classList.remove('active');mobileToggle.classList.remove('active');mobileToggle.setAttribute('aria-expanded','false');mobileToggle.setAttribute('aria-label','Menü öffnen');document.body.style.overflow='';}});}const hero=document.querySelector('.hero');const heroContent=document.querySelector('.hero-content');if(hero&&heroContent){window.addEventListener('scroll',function(){const scrolled=window.pageYOffset;const rate=scrolled*-0.5;heroContent.style.transform=`translateY(${rate}px)`;});}loadGermanTranslations();initLazyLoading();optimizeHeroImage();function loadGermanTranslations(){const htmlDoc=document.getElementById('html-doc');if(htmlDoc){htmlDoc.lang='de';}fetch('translations/de.json').then(response=>{if(!response.ok){throw new Error('Deutsche Übersetzungsdatei konnte nicht geladen werden. Status: '+response.status);}return response.json();}).then(translations=>{const elements=document.querySelectorAll('[data-i18n]');elements.forEach(element=>{const key=element.getAttribute('data-i18n');if(translations[key]){if(element.tagName==='INPUT'&&element.type==='submit'){element.value=translations[key];}else if(element.tagName==='INPUT'||element.tagName==='TEXTAREA'||element.tagName==='BUTTON'){element.placeholder=translations[key];}else{element.innerHTML=translations[key];}}});if(translations['page_title']){document.title=translations['page_title'];}const metaDescription=document.querySelector('meta[name="description"]');if(metaDescription&&translations['meta_description']){metaDescription.setAttribute('content',translations['meta_description']);}}).catch(error=>{console.error('Fehler beim Laden der deutschen Übersetzungen:',error);});}const contactForm=document.getElementById('contactForm');if(contactForm){contactForm.addEventListener('submit',function(e){e.preventDefault();let isValid=true;let errorMessages={name_required: 'Bitte geben Sie Ihren Namen ein',email_invalid: 'Bitte geben Sie eine gültige E-Mail-Adresse ein',message_required: 'Bitte geben Sie eine Nachricht ein',privacy_required: 'Bitte stimmen Sie den Datenschutzbestimmungen zu',form_success: 'Vielen Dank!Ihre Nachricht wurde erfolgreich gesendet.'};fetch('translations/de.json').then(response=>response.json()).then(translations=>{if(translations.errors){errorMessages={...errorMessages,...translations.errors};}validateForm();}).catch(error=>{console.error('Fehler beim Laden der deutschen Übersetzungen:',error);validateForm();});function validateForm(){const nameInput=document.getElementById('name');const nameError=document.getElementById('nameError');if(nameInput.value.trim()===''){nameError.textContent=errorMessages.name_required;isValid=false;}else{nameError.textContent='';}const emailInput=document.getElementById('email');const emailError=document.getElementById('emailError');const emailPattern=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailPattern.test(emailInput.value)){emailError.textContent=errorMessages.email_invalid;isValid=false;}else{emailError.textContent='';}const messageInput=document.getElementById('message');const messageError=document.getElementById('messageError');if(messageInput.value.trim()===''){messageError.textContent=errorMessages.message_required;isValid=false;}else{messageError.textContent='';}const privacyInput=document.getElementById('privacy');const privacyError=document.getElementById('privacyError');if(!privacyInput.checked){privacyError.textContent=errorMessages.privacy_required;isValid=false;}else{privacyError.textContent='';}if(isValid){const formSuccess=document.getElementById('formSuccess');formSuccess.textContent=errorMessages.form_success;contactForm.reset();setTimeout(()=>{formSuccess.textContent='';},3000);}}});}function initLazyLoading(){const images=document.querySelectorAll('img[data-src]');if('IntersectionObserver' in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;if(img.dataset.src){img.src=img.dataset.src;img.removeAttribute('data-src');}if(img.dataset.srcset){img.srcset=img.dataset.srcset;img.removeAttribute('data-srcset');}img.classList.add('lazy-loaded');observer.unobserve(img);}});},{rootMargin: '50px 0px',threshold: 0.01});images.forEach(img=>imageObserver.observe(img));const bgImages=document.querySelectorAll('[data-bg]');bgImages.forEach(element=>{imageObserver.observe(element);});}else{images.forEach(img=>{if(img.dataset.src){img.src=img.dataset.src;img.removeAttribute('data-src');}if(img.dataset.srcset){img.srcset=img.dataset.srcset;img.removeAttribute('data-srcset');}});}}function optimizeHeroImage(){const hero=document.querySelector('.hero');if(!hero||!('IntersectionObserver' in window)){return;}const heroObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){hero.classList.add('hero-visible');}else{hero.classList.remove('hero-visible');}});},{threshold: 0.1});heroObserver.observe(hero);}initFAQAccordion();function initFAQAccordion(){const faqQuestions=document.querySelectorAll('.faq-question');faqQuestions.forEach(question=>{question.addEventListener('click',function(){const answer=this.nextElementSibling;const isExpanded=this.getAttribute('aria-expanded')==='true';const category=this.closest('.faq-category');const allQuestions=category.querySelectorAll('.faq-question');const allAnswers=category.querySelectorAll('.faq-answer');allQuestions.forEach(q=>q.setAttribute('aria-expanded','false'));allAnswers.forEach(a=>a.classList.remove('active'));if(!isExpanded){this.setAttribute('aria-expanded','true');answer.classList.add('active');}});});}});